version: '3.8'
services:
  otp-middleware:
    # Temporary! move back to "latest"
    image: milesgrantibigroup/otp-middleware-test:cdp
    ports:
      - "4567:4567"
    volumes:
      - type: bind
        source: ./configurations/default/env.docker.yml
        target: /config/env.yml
      - type: bind
        source: ./configurations/default/aws-credentials
        target: /home/app/.aws/credentials
    depends_on:
      - mongo
  mongo:
    image: mongo
    restart: always